function m2m_collect()